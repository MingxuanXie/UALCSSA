<!-- Design and built by Mingxuan Xie from vrch.tech, using aframe.io -->

<!DOCTYPE html>
<html>
  <head>
    <title> Post Mass Media Exhibition [National Address]</title>
    <script src="./js/aframe.min.js"></script>
    <script src="./js/click-url.js"></script>
    <script src="./js/aframe-look-at-component.min.js"></script>
    <script>
      AFRAME.registerComponent('video-handler-04',{
        init: function(){
          let el = this.el;
          let vid = this.el.components.material.material.map.image;
        //  vid.pause();
          el.addEventListener('mouseenter',function(){
            vid.play();
            vid.muted = false;
          });
          el.addEventListener('mouseleave',function(){
            //  vid.pause();
            // vid.muted = true;
          });
        }
      });
    </script>

  </head>
  <body>

<!-- Aframe -->
    <a-scene background="color: #000000" fog="type: exponential; color: black; density: 0.1" loading-screen="dotsColor: white; backgroundColor: black" vr-mode-ui="enabled: false" wasd-control> 
    <!-- <a-scene vr-mode-ui="enabled: false" background="color: #ff0066" loading-screen="dotsColor: white; backgroundColor: black" wasd-control>  -->

<!-- Assets -->
      <a-assets>
        <video id="04" autoplay loop="true" src="./asset/04/National_Address.mp4"></video>
        <!-- Vrch -->
        <img id="portalImg" src="./asset/portal.png">
      </a-assets>

<!-- Exhibits -->
      <!-- 04 -->
      <a-video id="04exhibit" scale="1.2 1.2 1.2" position="0 1.92817 -5" geometry="primitive: plane" src="#04" width="8" height="4.5" material="side: front; shader: standard; roughness: 0.5;" video-handler-04></a-video>
      <a-plane id="04ground-" position="0 -0.75 0" geometry="primitive: circle; radius: 50" height="100" width="100" rotation="90 0 0" material="transparent: false; roughness: 0.5; blending: normal; color: grey; side: back"></a-plane>
      <a-entity id="04spotlight" rotation="-45 0 0" light="type: spot; color: #EEE; angle: 45; distance: 20; intensity: 3" position="0 8.96605 1.21719"></a-entity>

      <!-- Portal -->
      <a-entity id="back-to-reality" click-url="./reality.html" rotation="0 180 0"  position="0 2 5" look-at="#player" material="visible: false" geometry="primitive: circle; segments: 24;" raycastable="" scale="2 2 2" animation__mouseenterscale="property: scale; from: 1.5 1.5 1.5; to: 2 2 2; easing: easeInOutQuad; dir: alternate; loop: true; startEvents: mouseenter; dur: 1000; pauseEvents: mouseleave"> 
        <a-entity rotation="0 90 90">
          <a-entity class="portalEffect1" obj-model="obj: ./asset/portal.obj"  material="color: #fff; opacity: 0.6; depthWrite: false; shader: flat; fog: false; transparent: true; src: #portalImg" position="0 0 -0.017"  scale="3.116 5 3.116" animation="property: rotation; from: 0 0 0; to: 0 360 0; dur: 10000; loop: true; easing: linear"></a-entity> 
          <a-entity class="portalEffect2" obj-model="obj: ./asset/portal.obj"  material="color: #aaa; opacity: 0.6; depthWrite: false; shader: flat; fog: false; transparent: true; src: #portalImg" position="0 0 -0.058"  scale="3.078 0.969 3.078" animation="property: rotation; from: 0 0 0; to: 0 360 0; dur: 15000; loop: true; easing: linear"></a-entity> 
        </a-entity>
        <a-entity class="portalText" text="color: #ffffff; align: center; baseline: bottom; value: Back to Reality; side: double; width: 4; font: mozillavr" position="0 0 0"></a-entity>
      </a-entity>

<!-- System -->
      <a-camera id="player" position="0 1.6 0" far="1000" fov="75"></a-camera>
      <a-entity id="mouseCursor" raycaster="direction: 0.31270249920425447 -0.3614910775470146 -0.8783742641068847; origin: -7.928161151808763 11.25183428578057 4.943680514965203" cursor="rayOrigin: mouse"></a-entity>

<!-- Scene -->
      <!-- Environment -->
      <!-- <a-sky id="sky"color="cyan"></a-sky> -->    
      <!-- Vrch -->
      <!-- Vrch Mirror -->

    </a-entity>

    </a-scene>
  </body>
</html>