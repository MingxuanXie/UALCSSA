<!-- Design and built by Mingxuan Xie from vrch.tech, using aframe.io -->

<!DOCTYPE html>
<html>
  <head>
    <title> Post Mass Media Exhibition [Cafe]</title>
    <script src="./js/aframe.min.js"></script>
    <script src="./js/aframe-extras.min.js"></script>
    <script src="./js/aframe-gif-shader.min.js"></script>
    <script src="./js/video-handler.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="./js/click-url.js"></script>
  </head>
  <body>

<!-- Aframe -->
    <a-scene background="color: #e2e2dc" fog="type: exponential; color: #dfdfdf; density: 0.1" loading-screen="dotsColor: white; backgroundColor: black" vr-mode-ui="enabled: false" wasd-control> 

<!-- Assets -->
      <a-assets>
        <video id="03" autoplay muted="true" loop="true" src="./asset/03/little_red_music_restaurant.mp4"></video>
        <img id="lighttex" src="./asset/lightball.png">
        <!-- Vrch -->
        <img id="portalImg" src="./asset/portal.png">
        <a-mixin id="portal" material="visible: false" geometry="primitive: circle; segments: 24;" raycastable="" scale="2.5 2.5 2.5" animation__mouseenterscale="property: scale; from: 2.5 2.5 2.5; to: 2.8 2.8 2.8; easing: easeInOutQuad; dir: alternate; loop: true; startEvents: mouseenter; dur: 1000; pauseEvents: mouseleave"></a-mixin>
      </a-assets>

<!-- Template -->
      <!-- Stand -->
      <!-- <a-circle id="stand" geometry="segments: 36" material="blending: normal; wireframe: false; transparent: false; color: #ffffff; depthTest: true" scale="0.5 0.5 0.5" position="-0.01276 1 1.49386" rotation="-90 0 0"><a-sphere id="stand-base" material="blending: none" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle> -->
      <!-- Hoovered Text -->
      <!-- <a-box scale="10 10 10" visible="false" event-set__makevisible="_event: mouseenter; visible: true" event-set__leave="_event: mouseleave; visible: false"></a-box> -->

<!-- Exhibits -->
      <!-- 03 -->
      <a-cylinder id="cafe-video01" rotation="0 -135 0" position="-0.4 3.25 1.5" scale="-1.633 1.633 1.633" geometry="openEnded: true; height: 4; radius: 5; thetaLength: 120" material="src: #03; side: back; fog: false;" video-handler></a-cylinder>
      <a-entity scale="1 -1 1">
        <!-- REMOVE VIDEO HANDLER FOR MIRROR -->
        <a-cylinder id="cafe-video01" rotation="0 -135 0" position="-0.4 3.25 1.5" scale="-1.633 1.633 1.633" geometry="openEnded: true; height: 4; radius: 5; thetaLength: 120" material="src: #03; side: back; fog: false;"></a-cylinder>
      </a-entity>

<!-- System -->
      <a-camera id="player" position="0 1.6 10" far="1000" fov="75"></a-camera>
      <a-entity id="mouseCursor" cursor="rayOrigin: mouse"></a-entity>

<!-- Lights -->
<a-entity light="color: #e2dcc5; intensity: 0.3" position="0 1 2"></a-entity>
<a-entity light="type: ambient; color: #e3f0e9; intensity: 0.7; groundColor: #ffffff"></a-entity>

<!-- Scene -->
    <a-entity rotation="0 30 0">
      <a-entity id="virtual-portal" click-url="./virtuality.html" scale="2.5011364390144273 2.5011364390144273 2.5011364390144273" rotation="0 42.98673153748515 0"  position="-6.52077 0 -7.05644" mixin="portal" look-at="" geometry="" raycastable="" animation__mouseenterscale=""> 
        <a-entity rotation="0 90 90">
          <a-entity class="portalEffect1" obj-model="obj: ./asset/portal.obj"  material="color: #03c1e2; opacity: 1; depthWrite: false; shader: flat; fog: false; transparent: true; src: #portalImg" position="0 0 -0.017"  scale="3.116 5 3.116" animation="property: rotation; from: 0 0 0; to: 0 360 0; dur: 10000; loop: true; easing: linear"></a-entity> 
          <a-entity class="portalEffect2" obj-model="obj: ./asset/portal.obj"  material="color: #f37132; opacity: 1; depthWrite: false; shader: flat; fog: false; transparent: true; src: #portalImg" position="0 0 -0.058"  scale="3.078 0.969 3.078" animation="property: rotation; from: 0 0 0; to: 0 360 0; dur: 15000; loop: true; easing: linear"></a-entity> 
        </a-entity>
        <a-entity class="portalText" text="color: #ffffff; align: center; baseline: bottom; value: VIRTUALITY; side: double; width: 4" position="0 0 0"></a-entity>
        <a-entity class="portalTextMirror" text="color: #ffffff; align: center; baseline: bottom; value: VIRTUALITY; side: double; width: 4" position="0 0 0" scale="1 -1 1"></a-entity> 
      </a-entity>

      <a-entity id="real-portal" click-url="./reality.html" rotation="0 -136.54214511542162 0" position="6.51318 0 7.10872" mixin="portal" look-at="" geometry="" raycastable="" animation__mouseenterscale=""> 
        <a-entity rotation="0 90 90">
          <a-entity class="portalEffect1" obj-model="obj: ./asset/portal.obj"  material="color: #03c1e2; opacity: 1; depthWrite: false; shader: flat; fog: false; transparent: true; src: #portalImg" position="0 0 -0.017"  scale="3.116 5 3.116" animation="property: rotation; from: 0 0 0; to: 0 360 0; dur: 10000; loop: true; easing: linear"></a-entity> 
          <a-entity class="portalEffect2" obj-model="obj: ./asset/portal.obj"  material="color: #f37132; opacity: 1; depthWrite: false; shader: flat; fog: false; transparent: true; src: #portalImg" position="0 0 -0.058"  scale="3.078 0.969 3.078" animation="property: rotation; from: 0 0 0; to: 0 360 0; dur: 15000; loop: true; easing: linear"></a-entity> 
        </a-entity>
        <a-entity class="portalText" text="color: #ffffff; align: center; baseline: bottom; value: REALITY; side: double; width: 4" position="0 0 0"></a-entity>
        <a-entity class="portalTextMirror" text="color: #ffffff; align: center; baseline: bottom; value: REALITY; side: double; width: 4" position="0 0 0" scale="1 -1 1"></a-entity> 
      </a-entity>

    
      <!-- Vrch -->
      <a-sphere id="cafe-sphere01" geometry="phiLength: 360; radius: 10; thetaStart: 15; thetaLength: 150" material="side: back; transparent: false; opacity: 0.8; blending: normal; fog: false" rotation="-89.99963750135457 43.15174338248282 0" position="0 0 0" phi-length="270"></a-sphere>
      <a-circle id="chair01" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-4.96515 0.5 -1.00801" rotation="-90 0 0"><a-sphere id="chair-base01" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
      <a-circle id="chair02" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="1.0674 0.5 6.87127" rotation="-90 0 0"><a-sphere id="chair-base02" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
      <a-circle id="chair03" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-6.15882 0.5 2.39018" rotation="-90 0 0"><a-sphere id="chair-base03" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
      <a-circle id="chair04" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-0.71823 0.5 -3.3709" rotation="-90 0 0"><a-sphere id="chair-base04" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
      <a-circle id="chair05" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="0.8471 0.5 -0.91449" rotation="-90 0 0"><a-sphere id="chair-base05" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
      <a-circle id="chair06" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-2.66911 0.5 5.48969" rotation="-90 0 0"><a-sphere id="chair-base06" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
      <a-circle id="chair07" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-2.38535 0.5 1.53206" rotation="-90 0 0"><a-sphere id="chair-base07" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
      <a-circle id="chair08" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="4.04634 0.5 3.22664" rotation="-90 0 0"><a-sphere id="chair-base07" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
      <a-circle id="chair09" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="0.737 0.5 3.0052" rotation="-90 0 0"><a-sphere id="chair-base07" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
      
      <!-- Vrch Mirror -->
      <a-entity id="cafe-mirror" scale="1 -1 1">
        <a-circle id="chair01" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-4.96515 0.5 -1.00801" rotation="-90 0 0"><a-sphere id="chair-base01" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
        <a-circle id="chair02" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="1.0674 0.5 6.87127" rotation="-90 0 0"><a-sphere id="chair-base02" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
        <a-circle id="chair03" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-6.15882 0.5 2.39018" rotation="-90 0 0"><a-sphere id="chair-base03" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
        <a-circle id="chair04" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-0.71823 0.5 -3.3709" rotation="-90 0 0"><a-sphere id="chair-base04" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
        <a-circle id="chair05" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="0.8471 0.5 -0.91449" rotation="-90 0 0"><a-sphere id="chair-base05" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
        <a-circle id="chair06" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-2.66911 0.5 5.48969" rotation="-90 0 0"><a-sphere id="chair-base06" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
        <a-circle id="chair07" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="-2.38535 0.5 1.53206" rotation="-90 0 0"><a-sphere id="chair-base07" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
        <a-circle id="chair08" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="4.04634 0.5 3.22664" rotation="-90 0 0"><a-sphere id="chair-base07" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>
        <a-circle id="chair09" geometry="segments: 36" material="blending: normal; transparent: false; color: #ffffff" scale="0.5 0.5 0.5" position="0.737 0.5 3.0052" rotation="-90 0 0"><a-sphere id="chair-base07" material="" rotation="90 0 0" geometry="thetaLength: 90; thetaStart: 90"></a-sphere></a-circle>  
      </a-entity>
    </a-entity>

    <!-- Environment -->
    <a-plane id="actual-ground" position="0 0 0" material="; transparent: true; wireframe: false; roughness: 0.45; opacity: 0.9; metalness: 0; blending: multiply; color: #74d5ee; shader: standard; depthTest: true; depthWrite: true; alphaTest: 0; side: double; visible: true"position="0 0 0" geometry="height: 1000; width: 1000; primitive: circle; radius: 50; thetaLength: 360" height="100" width="100" rotation="90 0 0" ></a-plane>
    <a-sky id="virtual-sky-01" material="fog: false; color: #9ec9ce; shader: flat; opacity: 0.85; roughness: 0.45.5; transparent: true" rotation="90 0 0" geometry="phiLength: 180; radius: 50"></a-sky>
    <a-sky id="virtual-sky-02" material="wireframe: true; wireframeLinewidth: 0.1; fog: false; color: #eee; opacity: 0.5; roughness: 0.45.5; transparent: true" rotation="90 0 0" geometry="phiLength: 180; radius: 50"></a-sky>

    </a-scene>
  </body>
</html>